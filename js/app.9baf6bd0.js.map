{"version":3,"sources":["webpack:///src/App.vue","webpack:///./src/App.vue?fc33","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///src/components/Wall.vue","webpack:///./src/components/Wall.vue?434c","webpack:///./src/components/Wall.vue","webpack:///src/components/Video.vue","webpack:///./src/components/Video.vue?ec3b","webpack:///./src/components/Video.vue","webpack:///src/views/Room.vue","webpack:///./src/views/Room.vue?4a69","webpack:///./src/views/Room.vue","webpack:///src/views/Index.vue","webpack:///./src/views/Index.vue?b5e7","webpack:///./src/views/Index.vue","webpack:///./src/store.js"],"names":["App","render","_vm","this","_h","$createElement","_c","_self","attrs","id","_v","staticClass","staticRenderFns","injectStyle","context","__webpack_require__","__vue_template_functional__","__vue_styles__","__vue_scopeId__","__vue_module_identifier__","Component","Object","component_normalizer","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0_vue__","config","productionTip","use","__WEBPACK_IMPORTED_MODULE_1_vue_router__","router","mode","base","__dirname","routes","path","name","component","__WEBPACK_IMPORTED_MODULE_5__views_Index_vue__","__WEBPACK_IMPORTED_MODULE_4__views_Room_vue__","app","store","__WEBPACK_IMPORTED_MODULE_2__store__","h","__WEBPACK_IMPORTED_MODULE_3__App_vue__","$mount","Wall","text","_l","$store","state","post","idx","key","class","announce","from","_s","getters","_e","on","submit","$event","preventDefault","me","directives","rawName","value","expression","modifiers","trim","type","placeholder","domProps","input","target","composing","blur","$forceUpdate","components_Wall","vue_runtime_esm","vue_youtube_embed_default","a","Video","player","pullState","video","offset","pushState","paused","getOffset","pause","play","playVideo","pauseVideo","url","Video_render","ref","video-id","playing","handlePlaying","handlePaused","ready","handleReady","Video_staticRenderFns","Video___vue_template_functional__","Video___vue_styles__","Video___vue_scopeId__","Video___vue_module_identifier__","Video_Component","components_Video","Room","displayname","room","Room_render","setName","maxlength","peer","title","Room_staticRenderFns","Room___vue_template_functional__","Room___vue_styles__","Room___vue_scopeId__","Room___vue_module_identifier__","Room_Component","random_string","num","alphabet","length","r","Index","roomId","ipfs","window","Ipfs","EXPERIMENTAL","pubsub","Addresses","Swarm","__WEBPACK_IMPORTED_MODULE_1_vue__","__WEBPACK_IMPORTED_MODULE_2_vuex__","ipfsRoom","maxLength","browserStore","localStorage","anonName","defaultName","getItem","getName","p","peers","Store","strict","posts","timestamp","started","Date","askedState","mutations","handleReceive","_ref","data","push","shift","set","sync","sendTo","JSON","stringify","broadcast","Math","round","addPost","reset","setMe","_ref2","delete","setItem","setRoom","setVideo","_ref3","addPeer","removePeer","waitSync","actions","_ref4","_this","commit","dispatch","leave","console","log","__WEBPACK_IMPORTED_MODULE_3_ipfs_pubsub_room___default","then","peerInfo","numPeers","error","message","parse","requestState","_ref5","undefined","getPeers","random"],"mappings":"gHAWA,IAAAA,QAEA,OCbAC,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,OAAOC,GAAA,SAAYH,EAAA,MAAAJ,EAAAQ,GAAA,aAAAJ,EAAA,KAAAJ,EAAAQ,GAAA,wEAAAJ,EAAA,eAAwIK,YAAA,UAAmB,IACxRC,iBCDA,SAAAC,EAAAC,GACAC,EAAA,QAQA,IAAAC,GAAA,EAEAC,EAAAJ,EAEAK,EAAA,KAEAC,EAAA,KAEAC,EAAAC,OAAAC,EAAA,KAAAD,CACArB,EACAC,EACAW,EACAI,EACAC,EACAC,EACAC,GAGAI,EAAA,KAAAH,EAAA,oLCxBAI,EAAA,KAAIC,OAAOC,eAAgB,EAE3BF,EAAA,KAAIG,IAAIC,EAAA,MAOR,IAAMC,EAAS,IAAID,EAAA,MACjBE,KAAM,OACNC,KAAMC,EACNC,SACIC,KAAM,IAAKC,KAAM,QAASC,UAAWC,EAAA,OACrCH,KAAM,YAAaC,KAAM,OAAQC,UAAWE,EAAA,SAI5CC,EAAM,IAAIf,EAAA,MACdK,SACAW,MAAAC,EAAA,KACAxC,OAAQ,SAAAyC,GAAA,OAAKA,EAAEC,EAAA,SACdC,OAAO,QAEVrB,EAAA,YAAiBgB,qECPjBM,QAEA,cACA,oCAIA,gEAIAC,gBACA,MChCA7C,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBK,YAAA,SAAmBL,EAAA,MAAAJ,EAAAQ,GAAA,UAAAJ,EAAA,MAAqCK,YAAA,UAAoBT,EAAA6C,GAAA7C,EAAA8C,OAAAC,MAAA,eAAAC,EAAAC,GAAqD,OAAA7C,EAAA,MAAgB8C,IAAAD,EAAAE,OAAeC,UAAAJ,EAAAK,QAAsBL,EAAA,KAAA5C,EAAA,QAAyBK,YAAA,gBAA0BT,EAAAQ,GAAAR,EAAAsD,GAAAtD,EAAA8C,OAAAS,QAAAtB,KAAAe,EAAAK,UAAArD,EAAAwD,KAAAxD,EAAAQ,GAAA,IAAAR,EAAAsD,GAAAN,EAAAJ,MAAA,cAAyGxC,EAAA,MAAAA,EAAA,QAAsBqD,IAAIC,OAAA,SAAAC,GAAkD,OAAxBA,EAAAC,iBAAwB5D,EAAAgD,KAAAW,OAA0BvD,EAAA,QAAaK,YAAA,gBAA0BT,EAAAQ,GAAAR,EAAAsD,GAAAtD,EAAA8C,OAAAS,QAAAtB,KAAAjC,EAAA8C,OAAAC,MAAAc,GAAAtD,QAAAH,EAAA,SAAgF0D,aAAa7B,KAAA,QAAA8B,QAAA,eAAAC,MAAAhE,EAAA,KAAAiE,WAAA,OAAAC,WAAkFC,MAAA,KAAa7D,OAAS8D,KAAA,OAAAC,YAAA,OAAkCC,UAAWN,MAAAhE,EAAA,MAAmByD,IAAKc,MAAA,SAAAZ,GAAyBA,EAAAa,OAAAC,YAAsCzE,EAAA4C,KAAAe,EAAAa,OAAAR,MAAAG,SAAoCO,KAAA,SAAAf,GAAyB3D,EAAA2E,mBAAqBvE,EAAA,SAAcE,OAAO8D,KAAA,SAAAJ,MAAA,eAAgC,MACzhCtD,iBCDA,SAAAC,EAAAC,GACAC,EAAA,QAQA,IAAAC,GAAA,EAEAC,EAAAJ,EAEAK,EAAA,kBAEAC,EAAA,KAEAC,EAAAC,OAAAC,EAAA,KAAAD,CACAwB,EACA5C,EACAW,EACAI,EACAC,EACAC,EACAC,GAGA2D,EAAA1D,EAAA,yCCXA2D,EAAA,KAAApD,IAAAqD,EAAAC,GAEA,IAAAC,QAEA,mCAGA,WACA,SACA,cAEA,iDAIAC,OACAC,mDAGA,0BACAC,sBACA,eAEA,gDACA,gBACAC,aAEAC,kDAGA,OACAA,2HAKAC,mBACAC,uCAEAhF,uEAGA4E,iDAIAK,4BAIA,+BACA,kBACAJ,sBAEA,OACAK,oEAGAL,oDAGAM,8DAGAC,uDAGA,yGAGA,0DAIA,SACA,qCAEAC,gBACA,+KAQA7C,SACA9C,SCvGA4F,EAAA,WAA0B,IAAA7F,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBK,YAAA,UAAoBL,EAAA,MAAAJ,EAAAQ,GAAA,WAAAJ,EAAA,QAAwCqD,IAAIC,OAAA,SAAAC,GAAkD,OAAxBA,EAAAC,iBAAwB5D,EAAAgD,KAAAW,OAA0BvD,EAAA,SAAAJ,EAAAQ,GAAA,kBAAAJ,EAAA,SAAmD0D,aAAa7B,KAAA,QAAA8B,QAAA,eAAAC,MAAAhE,EAAA,IAAAiE,WAAA,MAAAC,WAAgFC,MAAA,KAAa7D,OAAS8D,KAAA,OAAAC,YAAA,2BAAsDC,UAAWN,MAAAhE,EAAA,KAAkByD,IAAKc,MAAA,SAAAZ,GAAyBA,EAAAa,OAAAC,YAAsCzE,EAAA4F,IAAAjC,EAAAa,OAAAR,MAAAG,SAAmCO,KAAA,SAAAf,GAAyB3D,EAAA2E,mBAAqBvE,EAAA,SAAcE,OAAO8D,KAAA,SAAAJ,MAAA,WAA+BhE,EAAA8C,OAAAC,MAAAoC,MAAA,GAAA/E,EAAA,WAA8C0F,IAAA,UAAAxF,OAAqByF,WAAA/F,EAAA8C,OAAAC,MAAAoC,MAAA5E,IAAqCkD,IAAKuC,QAAAhG,EAAAiG,cAAAX,OAAAtF,EAAAkG,aAAAC,MAAAnG,EAAAoG,eAA+EpG,EAAAwD,MAAA,IACp3B6C,KCKAC,GAAA,EAEAC,EAAA,KAEAC,EAAA,KAEAC,EAAA,KAEAC,EAAAvF,OAAAC,EAAA,KAAAD,CACA6D,EACAa,EACAQ,EACAC,EACAC,EACAC,EACAC,GAGAE,EAAAD,EAAA,QCEAE,QAEA,sDAGArG,oCAEA0B,yEAIA4E,4BAIAlE,KAAAiC,EAEAI,MAAA2B,0DAEAG,QC7CAC,EAAA,WAA0B,IAAA/G,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBK,YAAA,SAAmBL,EAAA,QAAaqD,IAAIC,OAAA,SAAAC,GAAkD,OAAxBA,EAAAC,iBAAwB5D,EAAAgH,QAAArD,OAA6B3D,EAAAQ,GAAA,eAAAJ,EAAA,SAAoC0D,aAAa7B,KAAA,QAAA8B,QAAA,eAAAC,MAAAhE,EAAA,YAAAiE,WAAA,cAAAC,WAAgGC,MAAA,KAAa7D,OAAS8D,KAAA,OAAA6C,UAAA,MAA+B3C,UAAWN,MAAAhE,EAAA,aAA0ByD,IAAKc,MAAA,SAAAZ,GAAyBA,EAAAa,OAAAC,YAAsCzE,EAAA6G,YAAAlD,EAAAa,OAAAR,MAAAG,SAA2CO,KAAA,SAAAf,GAAyB3D,EAAA2E,mBAAqBvE,EAAA,SAAcE,OAAO8D,KAAA,SAAAJ,MAAA,YAAgChE,EAAAQ,GAAA,oBAAAR,EAAAsD,GAAAtD,EAAA8C,OAAAC,MAAA+D,MAAA,WAAA1G,EAAA,MAAAJ,EAAAQ,GAAA,YAAAJ,EAAA,KAAAJ,EAAA6C,GAAA7C,EAAA8C,OAAAC,MAAA,eAAAmE,EAAA3G,GAA8J,OAAAH,EAAA,MAAgB8C,IAAA3C,EAAAD,OAAc6G,MAAA5G,KAAYP,EAAAQ,GAAA,WAAAR,EAAAsD,GAAA4D,EAAAjF,MAAA1B,GAAA,eAAwDH,EAAA,QAAcE,OAAOwG,KAAA9G,EAAA8G,QAAiB1G,EAAA,cACh8BgH,KCKAC,GAAA,EAEAC,EAAA,KAEAC,EAAA,KAEAC,EAAA,KAEAC,EAAAtG,OAAAC,EAAA,KAAAD,CACAyF,EACAG,EACAK,EACAC,EACAC,EACAC,EACAC,GAGAnG,EAAA,KAAAoG,EAAA,gECnBA,SAAAC,EAAAC,EAAAC,gBAEA,mEACA,uCAEAC,gBAEAC,EAEA,IAAAC,QAEA,mCAEA,6CACAC,OCnBAjI,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAJ,EAAAQ,GAAA,uBACzFE,iBCKAI,GAAA,EAEAC,EAAA,KAEAC,EAAA,KAEAC,EAAA,KAEAC,EAAAC,OAAAC,EAAA,KAAAD,CACA4G,EACAhI,EACAW,EACAI,EACAC,EACAC,EACAC,GAGAI,EAAA,KAAAH,EAAA,iHCpBM+G,EAAO,IAAIC,OAAOC,MACtBC,cACEC,QAAQ,GAEV9G,QACE+G,WACEC,OAGE,wEAORC,EAAA,KAAI/G,IAAIgH,EAAA,MAER,IAWIC,EAXEC,EAAY,GACZC,EAAeV,OAAOW,aAE5B,SAASC,EAAS5B,GAChB,OAAOA,EAGT,SAAS6B,IACP,OAAOH,EAAaI,QAAQ,QAK9B,SAASC,EAAQlG,EAAOmE,GACtB,IAAKA,EAAM,MAAO,aAClB,IAAMgC,EAAInG,EAAMoG,MAAMjC,GACtB,OAAKgC,GAAMA,EAAEjH,KACNiH,EAAEjH,KADiB6G,EAAS5B,GAIrC7F,EAAA,SAAmBoH,EAAA,KAAKW,OACtBC,QAAQ,EACRtG,OACEc,IACEtD,GAAI,GACJ0B,KAAM8G,KAER5C,OAAO,EACPW,KAAM,GACNwC,SACAnE,OACE5E,GAAI,GACJ+E,QAAQ,EACRiE,UAAW,EACXnE,OAAQ,GAEV+D,SACAK,SAAU,IAAIC,KACdC,YAAY,GAEdnG,SACEtB,KAAM,SAACc,GAAD,OAAW,SAACmE,GAChB,OAAO+B,EAAQlG,EAAOmE,MAG1ByC,WACEC,cADS,SACK7G,EADL8G,GAC0B,IAAbxG,EAAawG,EAAbxG,KAAMyG,EAAOD,EAAPC,KACtBA,EAAK9G,OACPD,EAAMuG,MAAMS,MACV1G,KAAMA,EACNT,KAAMkH,EAAK9G,OAETD,EAAMuG,MAAMzB,OAASc,GACvB5F,EAAMuG,MAAMU,SAGZF,EAAK7H,MACPuG,EAAA,KAAIyB,IAAIlH,EAAMoG,MAAO9F,GAAOpB,KAAM6H,EAAK7H,OAErC6H,EAAKI,MAAQJ,EAAKI,KAAOnH,EAAMyG,SACjCd,EAASyB,OAAO9G,EAAM+G,KAAKC,WACzBtH,OACEoC,MAAOpC,EAAMoC,MACbmE,MAAOvG,EAAMuG,MACbH,MAAOpG,EAAMoG,UAIfW,EAAK/G,OAASA,EAAM2G,aAAarG,IAC/BN,EAAMc,GAAGtD,IAAMwC,EAAMc,GAAG5B,OAE1B6H,EAAK/G,MAAMoG,MAAMpG,EAAMc,GAAGtD,KAAQ0B,KAAMc,EAAMc,GAAG5B,MACjDyG,EAAS4B,UAAUF,KAAKC,WAAWpI,KAAMc,EAAMc,GAAG5B,SAEpDc,EAAM2G,YAAa,EACnB3G,EAAMoC,MAAQ2E,EAAK/G,MAAMoC,MACzBpC,EAAMuG,MAAQQ,EAAK/G,MAAMuG,MACzBvG,EAAMoG,MAAQW,EAAK/G,MAAMoG,OAEvBW,EAAK3E,QACHpC,EAAMoC,MAAM5E,KAAOuJ,EAAK3E,MAAM5E,GAChCwC,EAAMuG,MAAMS,MAAMnH,KAAM,gBAAkBqG,EAAQlG,EAAOM,KAChDN,EAAMoC,MAAMG,SAAWwE,EAAK3E,MAAMG,OAC3CvC,EAAMuG,MAAMS,MAAMnH,KAAM,oBAAsBqG,EAAQlG,EAAOM,GAAQ,OAASkH,KAAKC,MAAMV,EAAK3E,MAAMC,OAAQ,GAAG,OACrGrC,EAAMoC,MAAMG,QAAUwE,EAAK3E,MAAMG,OAC3CvC,EAAMuG,MAAMS,MAAMnH,KAAM,mBAAqBqG,EAAQlG,EAAOM,MAClDN,EAAMoC,MAAMC,SAAW0E,EAAK3E,MAAMC,QAC5CrC,EAAMuG,MAAMS,MAAMnH,KAAM,mBAAqBqG,EAAQlG,EAAOM,KAE9DN,EAAMoC,MAAQ2E,EAAK3E,QAGvBsF,QA/CS,SA+CD1H,EAAOC,GACTD,EAAMoD,MACRuC,EAAS4B,UAAUF,KAAKC,WAAWrH,UAEnCD,EAAMuG,MAAMS,MACV1G,KAAMN,EAAMc,GAAGtD,GACfqC,KAAMI,KAIZ0H,MAzDS,SAyDH3H,GACJA,EAAM+D,KAAO,GACb/D,EAAMuG,SACNvG,EAAMoG,SACNpG,EAAMoC,OACJ5E,GAAI,GACJ+E,QAAQ,EACRiE,UAAW,IAGfoB,MAnES,SAmEH5H,EAnEG6H,GAmEgB,IAAXrK,EAAWqK,EAAXrK,GAAI0B,EAAO2I,EAAP3I,KACZ1B,GAAMwC,EAAMc,GAAGtD,KAAOA,IACpBwC,EAAMc,GAAGtD,IAAIiI,EAAA,KAAIqC,OAAO9H,EAAMoG,MAAOpG,EAAMc,GAAGtD,IAClDiI,EAAA,KAAIyB,IAAIlH,EAAMc,GAAI,KAAMtD,IAEtB0B,GACF2G,EAAakC,QAAQ,OAAQ7I,GAC7BuG,EAAA,KAAIyB,IAAIlH,EAAMc,GAAI,OAAQ5B,GAC1ByG,EAAS4B,UAAUF,KAAKC,WAAWpI,WAC1Bc,EAAMc,GAAG5B,MAClByG,EAAS4B,UAAUF,KAAKC,WAAWpI,KAAMc,EAAMc,GAAG5B,SAGtD8I,QAhFS,SAgFDhI,EAAO+D,GACb/D,EAAM+D,KAAOA,GAEfkE,SAnFS,SAmFAjI,EAnFAkI,GAmF8B,IAAtB1K,EAAsB0K,EAAtB1K,GAAI+E,EAAkB2F,EAAlB3F,OAAQF,EAAU6F,EAAV7F,OACrBmE,GAAa,IAAIE,KACvBf,EAAS4B,UAAUF,KAAKC,WAAWlF,OAAS5E,KAAI+E,SAAQiE,YAAWnE,cAErE8F,QAvFS,SAuFDnI,EAAOmE,GACbsB,EAAA,KAAIyB,IAAIlH,EAAMoG,MAAOjC,OAGvBiE,WA3FS,SA2FEpI,EAAOmE,GAChBsB,EAAA,KAAIqC,OAAO9H,EAAMoG,MAAOjC,IAE1Bf,MA9FS,SA8FHpD,EAAOiB,GACXjB,EAAMoD,MAAQnC,GAEhBoH,SAjGS,SAiGArI,EAAOmE,GACdnE,EAAM2G,WAAaxC,IAGvBmE,SACEN,QADO,SAAAO,EAC4BxE,GAAM,IAAAyE,EAAAtL,KAAhCuL,EAAgCF,EAAhCE,OAAQzI,EAAwBuI,EAAxBvI,MAAO0I,EAAiBH,EAAjBG,SAClB3E,IAAS/D,EAAM+D,OACf/D,EAAMoD,OAAOqF,EAAO,SAAS,GAC7B9C,IACFA,EAASgD,QACTF,EAAO,UAGTA,EAAO,UAAW1E,GAElBmB,EAAKxE,GAAG,QAAS,WACfkI,QAAQC,IAAI,QAASL,GACrB7C,EAAWmD,IAAK5D,EAAMlF,EAAM+D,MAE5BmB,EAAK1H,KAAKuL,KAAK,SAACC,GACdP,EAAO,SAAUjL,GAAIwL,EAASxL,OAGhC,IAAIyL,EAAW,EACftD,EAASjF,GAAG,cAAe,SAACyD,GAC1ByE,QAAQC,IAAI,cAAe1E,GAC3B8E,GAAY,EACZR,EAAO,UAAWtE,GAED,IAAb8E,GACFP,EAAS,eAAgBvE,KAI7BwB,EAASjF,GAAG,YAAa,SAACyD,GACxByE,QAAQC,IAAI,YAAa1E,GACzBsE,EAAO,aAActE,KAGvBwB,EAASjF,GAAG,aAAc,SAAClD,GACzBoL,QAAQC,IAAI,kBAAmBrL,GAC3BA,IAAOuG,GACT6E,QAAQM,MAAM,sCAEhBT,EAAO,SAAS,KAGlB9C,EAASjF,GAAG,UAAW,SAACyI,GACtB,IAAMpC,EAAOM,KAAK+B,MAAMD,EAAQpC,MAChC6B,QAAQC,IAAI,UAAWM,EAAQ7I,KAAMyG,GACrC0B,EAAO,iBAAkBnI,KAAM6I,EAAQ7I,KAAMyG,KAAMA,UAIzDsC,aAlDO,SAAAC,EAkDuBnF,GAAM,IAAtBsE,EAAsBa,EAAtBb,OAAQzI,EAAcsJ,EAAdtJ,MACpB,QAAauJ,IAATpF,EAAoB,CAEtB,IAAMiC,EAAQT,EAAS6D,WACvB,GAAqB,IAAjBpD,EAAMtB,OAAc,OAExB,IAAM5E,KAASsH,KAAKiC,SAAWrD,EAAMtB,QACrCX,EAAOiC,EAAMlG,GAEfuI,EAAO,WAAYtE,GACnBwB,EAASyB,OAAOjD,EAAMkD,KAAKC,WAAWH,KAAMnH,EAAMyG","file":"js/app.9baf6bd0.js","sourcesContent":["<template>\n  <div id=\"app\">\n    <h1>readyup</h1>\n    <p>\n      Coordinate your work or play sessions with your friends.\n    </p>\n    <router-view class=\"view\"></router-view>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'app',\n}\n</script>\n\n<style lang=\"scss\">\nbody {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n  margin: 2em;\n}\n\nh1, h2 {\n  font-weight: normal;\n  margin: 1.5em 0 0.5em 0;\n}\n\nul {\n  list-style-type: none;\n  padding: 0;\n}\n\na {\n  color: #42b983;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('h1',[_vm._v(\"readyup\")]),_c('p',[_vm._v(\"\\n    Coordinate your work or play sessions with your friends.\\n  \")]),_c('router-view',{staticClass:\"view\"})],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1a01b8a8\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!sass-loader?{\\\"sourceMap\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/shazow/projects/readyup/node_modules/.cache/cache-loader\\\"}!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/shazow/projects/readyup/node_modules/.cache/cache-loader\\\"}!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1a01b8a8\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport VueRouter from 'vue-router'\n\nVue.config.productionTip = false\n\nVue.use(VueRouter)\n\nimport store from '@/store'\nimport App from '@/App.vue'\nimport Room from '@/views/Room.vue'\nimport Index from '@/views/Index.vue'\n\nconst router = new VueRouter({\n  mode: 'hash',\n  base: __dirname,\n  routes: [\n    { path: '/', name: 'index', component: Index },\n    { path: '/room/:id', name: 'room', component: Room },\n  ]\n})\n\nconst app = new Vue({\n  router,\n  store,\n  render: h => h(App),\n}).$mount('#app')\n\nexport default { app }\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","<template>\n  <div class=\"wall\">\n    <h2>Wall</h2>\n    <ul class=\"posts\">\n      <li v-for=\"(post, idx) in $store.state.posts\" :key='idx' :class=\"{announce: !post.from}\">\n        <span class=\"displayname\" v-if=\"post.from\">{{$store.getters.name(post.from)}}</span> {{post.text}}\n      </li>\n      <li>\n        <form v-on:submit.prevent=\"post\">\n          <span class=\"displayname\">{{$store.getters.name($store.state.me.id)}}</span>\n          <input type=\"text\" v-model.trim=\"text\" placeholder=\"...\" />\n          <input type=\"submit\" value=\"Post\" />\n        </form>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: 'Wall',\n  props: ['room'],\n  data: () => {\n    return {\n      text: '',\n    };\n  },\n  methods: {\n    post() {\n      this.$store.commit('addPost', this.text)\n      this.text = '';\n    }\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.wall {\n    li {\n        margin-bottom: 0.5em;\n        line-height: 1.5em;\n    }\n    .displayname {\n        display: inline-block;\n        vertical-align: bottom;\n        width: 7em;\n        overflow: hidden;\n        font-weight: bold;\n        text-align: right;\n        &:after {\n            content: \": \";\n        }\n    }\n    .announce {\n      color: rgba(0, 0, 0, 0.5);\n      font-style: italic;\n    }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Wall.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wall\"},[_c('h2',[_vm._v(\"Wall\")]),_c('ul',{staticClass:\"posts\"},[_vm._l((_vm.$store.state.posts),function(post,idx){return _c('li',{key:idx,class:{announce: !post.from}},[(post.from)?_c('span',{staticClass:\"displayname\"},[_vm._v(_vm._s(_vm.$store.getters.name(post.from)))]):_vm._e(),_vm._v(\" \"+_vm._s(post.text)+\"\\n    \")])}),_c('li',[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.post($event)}}},[_c('span',{staticClass:\"displayname\"},[_vm._v(_vm._s(_vm.$store.getters.name(_vm.$store.state.me.id)))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.text),expression:\"text\",modifiers:{\"trim\":true}}],attrs:{\"type\":\"text\",\"placeholder\":\"...\"},domProps:{\"value\":(_vm.text)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.text=$event.target.value.trim()},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('input',{attrs:{\"type\":\"submit\",\"value\":\"Post\"}})])])],2)])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-05b566b8\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Wall.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-05b566b8\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!sass-loader?{\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Wall.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/shazow/projects/readyup/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Wall.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/shazow/projects/readyup/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Wall.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-05b566b8\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Wall.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-05b566b8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Wall.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"video\">\n    <h2>Video</h2>\n    <form v-on:submit.prevent=\"post\">\n      <label>Youtube Link</label>\n      <input type=\"text\" v-model.trim=\"url\" placeholder=\"https://youtube.com/...\" />\n      <input type=\"submit\" value=\"Set\" />\n    </form>\n    <youtube :video-id=\"$store.state.video.id\" ref=\"youtube\" @playing=\"handlePlaying\" @paused=\"handlePaused\" @ready=\"handleReady\" v-if=\"$store.state.video.id\"></youtube>\n  </div>\n</template>\n\n<script>\n\nimport Vue from 'vue'\nimport VueYouTubeEmbed from 'vue-youtube-embed'\nVue.use(VueYouTubeEmbed)\n\nexport default {\n  name: 'Video',\n  data: () => {\n    return {\n      url: '',\n      paused: true,\n      player: null,\n      pulling: false,\n    }\n  },\n  methods: {\n    handleReady(player) {\n      this.player = player\n      this.pullState()\n    },\n    handlePlaying() {\n      this.paused = false\n      const video = this.$store.state.video\n      if (this.pulling) {\n        // Seek again just in case buffering took a while\n        this.pulling = false\n        const offset = video.timestamp ? ((+new Date()) - video.timestamp) / 1000 : 0\n        this.seek(offset + video.offset)\n      }\n      this.pushState()\n    },\n    handlePaused() {\n      this.paused = true\n      this.pushState()\n    },\n    pushState() {\n      if (this.$store.state.video.paused === this.paused) return;\n      this.$store.commit('setVideo', {\n        paused: this.paused,\n        offset: this.getOffset(),\n        id: this.$store.state.video.id,\n      })\n    },\n    pullState(state) {\n      const video = state !== undefined ? state.video : this.$store.state.video\n      if (video.paused === this.paused) return\n\n      if (video.paused) {\n        this.pause()\n        return\n      }\n\n      if (video.timestamp) {\n        const offset = ((+new Date()) - video.timestamp) / 1000\n        this.seek(offset + video.offset)\n      }\n      this.pulling = true\n      this.play()\n    },\n    seek(offset) {\n      return offset && this.player && this.player.seekTo(offset)\n    },\n    play() {\n      return this.player && this.player.playVideo()\n    },\n    pause() {\n      return this.player && this.player.pauseVideo()\n    },\n    isPlaying() {\n      return this.player && this.player.getPlayerState() === 1\n    },\n    getOffset() {\n      return this.player && this.player.getCurrentTime() || 0\n    },\n    post() {\n      this.$store.commit('setVideo', {\n        paused: true,\n        offset: 0,\n        id: this.$youtube.getIdFromURL(this.url),\n      })\n      this.url = ''\n    }\n  },\n  mounted() {\n    this.$store.subscribe(function(mutation, state) {\n      if (mutation.type !== 'handleReceive') return\n      if (mutation.payload.data.video === undefined) return\n      if (mutation.payload.data.video.paused === this.paused) return\n      this.pullState(state)\n    }.bind(this))\n  },\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Video.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"video\"},[_c('h2',[_vm._v(\"Video\")]),_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.post($event)}}},[_c('label',[_vm._v(\"Youtube Link\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.url),expression:\"url\",modifiers:{\"trim\":true}}],attrs:{\"type\":\"text\",\"placeholder\":\"https://youtube.com/...\"},domProps:{\"value\":(_vm.url)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.url=$event.target.value.trim()},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('input',{attrs:{\"type\":\"submit\",\"value\":\"Set\"}})]),(_vm.$store.state.video.id)?_c('youtube',{ref:\"youtube\",attrs:{\"video-id\":_vm.$store.state.video.id},on:{\"playing\":_vm.handlePlaying,\"paused\":_vm.handlePaused,\"ready\":_vm.handleReady}}):_vm._e()],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-29c64971\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Video.vue\n// module id = null\n// module chunks = ","/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/shazow/projects/readyup/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Video.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/shazow/projects/readyup/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Video.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-29c64971\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Video.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Video.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"room\">\n    <form v-on:submit.prevent=\"setName\">\n      I am <input type=\"text\" v-model.trim=\"displayname\" maxlength=\"10\" />\n      <input type=\"submit\" value=\"Save\" />\n    </form>\n\n    Welcome to {{ $store.state.room }}.\n\n    <h2>Online</h2>\n    <ul>\n      <li v-for=\"(peer, id) in $store.state.peers\" :key=\"id\" :title=\"id\">\n        {{peer.name || id}}\n      </li>\n    </ul>\n\n    <wall :room=\"room\"></wall>\n\n    <Video></Video>\n  </div>\n</template>\n\n<script>\nimport Wall from '@/components/Wall.vue'\nimport Video from '@/components/Video.vue'\n\nexport default {\n  name: 'Room',\n  data() {\n    return {\n      room: this.$route.params.id,\n      displayname: this.$store.state.me.name,\n    }\n  },\n  methods: {\n    setName() {\n      this.$store.commit('setMe', {name: this.displayname})\n    },\n  },\n  components: {\n    Wall,\n    Video,\n  },\n  created() {\n    this.$store.dispatch('setRoom', this.room)\n  },\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/Room.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"room\"},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.setName($event)}}},[_vm._v(\"\\n    I am \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.displayname),expression:\"displayname\",modifiers:{\"trim\":true}}],attrs:{\"type\":\"text\",\"maxlength\":\"10\"},domProps:{\"value\":(_vm.displayname)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.displayname=$event.target.value.trim()},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('input',{attrs:{\"type\":\"submit\",\"value\":\"Save\"}})]),_vm._v(\"\\n\\n  Welcome to \"+_vm._s(_vm.$store.state.room)+\".\\n\\n  \"),_c('h2',[_vm._v(\"Online\")]),_c('ul',_vm._l((_vm.$store.state.peers),function(peer,id){return _c('li',{key:id,attrs:{\"title\":id}},[_vm._v(\"\\n      \"+_vm._s(peer.name || id)+\"\\n    \")])})),_c('wall',{attrs:{\"room\":_vm.room}}),_c('Video')],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4e227a9b\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Room.vue\n// module id = null\n// module chunks = ","/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/shazow/projects/readyup/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Room.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/shazow/projects/readyup/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Room.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4e227a9b\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Room.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Room.vue\n// module id = null\n// module chunks = ","<template>\n  <div>Creating room...</div>\n</template>\n\n<script>\nfunction random_string(num, alphabet) {\n    const charset = alphabet || 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    let r = '';\n    for (let i=num; i > 0; i--) {\n        r += charset[~~(Math.random() * charset.length)];\n    }\n    return r;\n}\n\nexport default {\n  name: 'Index',\n  mounted() {\n    const roomId = random_string(8)\n    this.$router.push({ name: 'room', params: { id: roomId }})\n  },\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/Index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\"Creating room...\")])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b5ebc260\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Index.vue\n// module id = null\n// module chunks = ","/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/shazow/projects/readyup/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Index.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/shazow/projects/readyup/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Index.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b5ebc260\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Index.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Vuex from 'vuex'\n\nimport Room from 'ipfs-pubsub-room'\nconst ipfs = new window.Ipfs({\n  EXPERIMENTAL: {\n    pubsub: true\n  },\n  config: {\n    Addresses: {\n      Swarm: [\n        // TODO: Try webrtc? https://github.com/ipfs/js-ipfs/issues/1088\n        //'/dns4/wrtc-star.discovery.libp2p.io/tcp/443/wss/p2p-webrtc-star'\n        '/dns4/ws-star.discovery.libp2p.io/tcp/443/wss/p2p-websocket-star'\n      ]\n    }\n  }\n})\n\n\nVue.use(Vuex)\n\nconst maxLength = 10\nconst browserStore = window.localStorage\n\nfunction anonName(peer) {\n  return peer\n}\n\nfunction defaultName() {\n  return browserStore.getItem('name')\n}\n\nlet ipfsRoom;\n\nfunction getName(state, peer) {\n  if (!peer) return 'Anonymoose'\n  const p = state.peers[peer]\n  if (!p || !p.name) return anonName(peer)\n  return p.name\n}\n\nexport default new Vuex.Store({\n  strict: true,\n  state: {\n    me: {\n      id: '',\n      name: defaultName(),\n    },\n    ready: false,\n    room: '',\n    posts: [],\n    video: {\n      id: '',\n      paused: false,\n      timestamp: 0,\n      offset: 0,\n    },\n    peers: {},\n    started: +new Date(),\n    askedState: false,\n  },\n  getters: {\n    name: (state) => (peer) => {\n      return getName(state, peer)\n    }\n  },\n  mutations: {\n    handleReceive(state, {from, data}) {\n      if (data.post) {\n        state.posts.push({\n          from: from,\n          text: data.post\n        })\n        if (state.posts.length > maxLength) {\n          state.posts.shift();\n        }\n      }\n      if (data.name) {\n        Vue.set(state.peers, from, {name: data.name})\n      }\n      if (data.sync && data.sync > state.started) {\n        ipfsRoom.sendTo(from, JSON.stringify({\n          state: {\n            video: state.video,\n            posts: state.posts,\n            peers: state.peers,\n          },\n        }))\n      }\n      if (data.state && state.askedState===from) {\n        if (state.me.id && state.me.name) {\n          // Override me\n          data.state.peers[state.me.id] = { name: state.me.name }\n          ipfsRoom.broadcast(JSON.stringify({name: state.me.name}))\n        }\n        state.askedState = false\n        state.video = data.state.video\n        state.posts = data.state.posts\n        state.peers = data.state.peers\n      }\n      if (data.video) {\n        if (state.video.id !== data.video.id) {\n          state.posts.push({text: 'Video set by ' + getName(state, from)})\n        } else if (state.video.paused && !data.video.paused) {\n          state.posts.push({text: 'Video started by ' + getName(state, from) + ' at ' + Math.round(data.video.offset, 0)+'s'})\n        } else if (!state.video.paused && data.video.paused) {\n          state.posts.push({text: 'Video paused by ' + getName(state, from)})\n        } else if (!state.video.offset !== data.video.offset) {\n          state.posts.push({text: 'Video jumped by ' + getName(state, from)})\n        }\n        state.video = data.video\n      }\n    },\n    addPost(state, post) {\n      if (state.ready) {\n        ipfsRoom.broadcast(JSON.stringify({post}))\n      } else {\n        state.posts.push({\n          from: state.me.id,\n          text: post,\n        })\n      }\n    },\n    reset(state) {\n      state.room = ''\n      state.posts = []\n      state.peers = {}\n      state.video = {\n        id: '',\n        paused: false,\n        timestamp: 0,\n      }\n    },\n    setMe(state, {id, name}) {\n      if (id && state.me.id !== id) {\n        if (state.me.id) Vue.delete(state.peers, state.me.id)\n        Vue.set(state.me, 'id', id)\n      }\n      if (name) {\n        browserStore.setItem('name', name)\n        Vue.set(state.me, 'name', name)\n        ipfsRoom.broadcast(JSON.stringify({name}))\n      } else if (state.me.name) {\n        ipfsRoom.broadcast(JSON.stringify({name: state.me.name}))\n      }\n    },\n    setRoom(state, room) {\n      state.room = room;\n    },\n    setVideo(state, {id, paused, offset }) {\n      const timestamp = +new Date()\n      ipfsRoom.broadcast(JSON.stringify({video: { id, paused, timestamp, offset }}))\n    },\n    addPeer(state, peer) {\n      Vue.set(state.peers, peer, {\n      })\n    },\n    removePeer(state, peer) {\n      Vue.delete(state.peers, peer)\n    },\n    ready(state, value) {\n      state.ready = value\n    },\n    waitSync(state, peer) {\n      state.askedState = peer\n    }\n  },\n  actions: {\n    setRoom({commit, state, dispatch}, room) {\n      if (room === state.room) return\n      if (state.ready) commit('ready', false)\n      if (ipfsRoom) {\n        ipfsRoom.leave()\n        commit('reset')\n      }\n\n      commit('setRoom', room)\n\n      ipfs.on('ready', () => {\n        console.log('ready', this)\n        ipfsRoom = Room(ipfs, state.room)\n\n        ipfs.id().then((peerInfo) => {\n          commit('setMe', {id: peerInfo.id})\n        })\n\n        let numPeers = 0\n        ipfsRoom.on('peer joined', (peer) => {\n          console.log('peer joined', peer)\n          numPeers += 1\n          commit('addPeer', peer)\n\n          if (numPeers === 1) {\n            dispatch('requestState', peer)\n          }\n        })\n\n        ipfsRoom.on('peer left', (peer) => {\n          console.log('peer left', peer)\n          commit('removePeer', peer)\n        })\n\n        ipfsRoom.on('subscribed', (id) => {\n          console.log('peer subscribed', id)\n          if (id !== room) {\n            console.error('wrong room, this should not happen')\n          }\n          commit('ready', true)\n        })\n\n        ipfsRoom.on('message', (message) => {\n          const data = JSON.parse(message.data)\n          console.log('message', message.from, data)\n          commit('handleReceive', {from: message.from, data: data})\n        })\n      })\n    },\n    requestState({commit, state}, peer) {\n      if (peer === undefined) {\n        // We choose a random peer to get state from\n        const peers = ipfsRoom.getPeers()\n        if (peers.length === 0) return // We're the host?\n\n        const idx = ~~(Math.random() * peers.length)\n        peer = peers[idx]\n      }\n      commit('waitSync', peer)\n      ipfsRoom.sendTo(peer, JSON.stringify({sync: state.started}))\n    },\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/store.js"],"sourceRoot":""}