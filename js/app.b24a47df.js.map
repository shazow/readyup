{"version":3,"sources":["webpack:///src/App.vue","webpack:///./src/App.vue?fc33","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///src/components/Wall.vue","webpack:///./src/components/Wall.vue?a90d","webpack:///./src/components/Wall.vue","webpack:///src/components/Video.vue","webpack:///./src/components/Video.vue?ec3b","webpack:///./src/components/Video.vue","webpack:///src/views/Room.vue","webpack:///./src/views/Room.vue?4a69","webpack:///./src/views/Room.vue","webpack:///src/views/Index.vue","webpack:///./src/views/Index.vue?b5e7","webpack:///./src/views/Index.vue","webpack:///./src/store.js"],"names":["App","render","_vm","this","_h","$createElement","_c","_self","attrs","id","_v","staticClass","staticRenderFns","injectStyle","context","__webpack_require__","__vue_template_functional__","__vue_styles__","__vue_scopeId__","__vue_module_identifier__","Component","Object","component_normalizer","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0_vue__","config","productionTip","use","__WEBPACK_IMPORTED_MODULE_1_vue_router__","router","mode","base","__dirname","routes","path","name","component","__WEBPACK_IMPORTED_MODULE_5__views_Index_vue__","__WEBPACK_IMPORTED_MODULE_4__views_Room_vue__","app","store","__WEBPACK_IMPORTED_MODULE_2__store__","h","__WEBPACK_IMPORTED_MODULE_3__App_vue__","$mount","Wall","text","_l","$store","state","post","idx","key","_s","getters","from","on","submit","$event","preventDefault","me","directives","rawName","value","expression","modifiers","trim","type","placeholder","domProps","input","target","composing","blur","$forceUpdate","components_Wall","vue_runtime_esm","vue_youtube_embed_default","a","Video","player","pullState","video","offset","pushState","paused","getOffset","pause","play","playVideo","pauseVideo","url","Video_render","ref","video-id","playing","handlePlaying","handlePaused","ready","handleReady","_e","Video_staticRenderFns","Video___vue_template_functional__","Video___vue_styles__","Video___vue_scopeId__","Video___vue_module_identifier__","Video_Component","components_Video","Room","displayname","room","Room_render","setName","maxlength","peer","title","Room_staticRenderFns","Room___vue_template_functional__","Room___vue_styles__","Room___vue_scopeId__","Room___vue_module_identifier__","Room_Component","random_string","num","alphabet","length","r","Index","roomId","ipfs","window","Ipfs","EXPERIMENTAL","pubsub","Addresses","Swarm","__WEBPACK_IMPORTED_MODULE_1_vue__","__WEBPACK_IMPORTED_MODULE_2_vuex__","ipfsRoom","maxLength","browserStore","localStorage","anonName","defaultName","getItem","Store","strict","posts","timestamp","peers","started","Date","askedState","p","mutations","handleReceive","_ref","data","push","shift","set","sync","sendTo","JSON","stringify","broadcast","addPost","reset","setMe","_ref2","delete","setItem","setRoom","setVideo","_ref3","addPeer","removePeer","waitSync","actions","_ref4","_this","commit","dispatch","leave","console","log","__WEBPACK_IMPORTED_MODULE_3_ipfs_pubsub_room___default","then","peerInfo","numPeers","error","message","parse","requestState","_ref5","undefined","getPeers","Math","random"],"mappings":"qIAWA,IAAAA,QAEA,OCbAC,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,OAAOC,GAAA,SAAYH,EAAA,MAAAJ,EAAAQ,GAAA,aAAAJ,EAAA,KAAAJ,EAAAQ,GAAA,wEAAAJ,EAAA,eAAwIK,YAAA,UAAmB,IACxRC,iBCDA,SAAAC,EAAAC,GACAC,EAAA,QAQA,IAAAC,GAAA,EAEAC,EAAAJ,EAEAK,EAAA,KAEAC,EAAA,KAEAC,EAAAC,OAAAC,EAAA,KAAAD,CACArB,EACAC,EACAW,EACAI,EACAC,EACAC,EACAC,GAGAI,EAAA,KAAAH,EAAA,oLCxBAI,EAAA,KAAIC,OAAOC,eAAgB,EAE3BF,EAAA,KAAIG,IAAIC,EAAA,MAOR,IAAMC,EAAS,IAAID,EAAA,MACjBE,KAAM,OACNC,KAAMC,EACNC,SACIC,KAAM,IAAKC,KAAM,QAASC,UAAWC,EAAA,OACrCH,KAAM,YAAaC,KAAM,OAAQC,UAAWE,EAAA,SAI5CC,EAAM,IAAIf,EAAA,MACdK,SACAW,MAAAC,EAAA,KACAxC,OAAQ,SAAAyC,GAAA,OAAKA,EAAEC,EAAA,SACdC,OAAO,QAEVrB,EAAA,YAAiBgB,qECPjBM,QAEA,cACA,oCAIA,gEAIAC,gBACA,MChCA7C,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBK,YAAA,SAAmBL,EAAA,MAAAJ,EAAAQ,GAAA,UAAAJ,EAAA,MAAqCK,YAAA,UAAoBT,EAAA6C,GAAA7C,EAAA8C,OAAAC,MAAA,eAAAC,EAAAC,GAAqD,OAAA7C,EAAA,MAAgB8C,IAAAD,IAAQ7C,EAAA,QAAaK,YAAA,gBAA0BT,EAAAQ,GAAAR,EAAAmD,GAAAnD,EAAA8C,OAAAM,QAAAnB,KAAAe,EAAAK,UAAArD,EAAAQ,GAAA,IAAAR,EAAAmD,GAAAH,EAAAJ,MAAA,cAAgGxC,EAAA,MAAAA,EAAA,QAAsBkD,IAAIC,OAAA,SAAAC,GAAkD,OAAxBA,EAAAC,iBAAwBzD,EAAAgD,KAAAQ,OAA0BpD,EAAA,QAAaK,YAAA,gBAA0BT,EAAAQ,GAAAR,EAAAmD,GAAAnD,EAAA8C,OAAAM,QAAAnB,KAAAjC,EAAA8C,OAAAC,MAAAW,GAAAnD,QAAAH,EAAA,SAAgFuD,aAAa1B,KAAA,QAAA2B,QAAA,eAAAC,MAAA7D,EAAA,KAAA8D,WAAA,OAAAC,WAAkFC,MAAA,KAAa1D,OAAS2D,KAAA,OAAAC,YAAA,OAAkCC,UAAWN,MAAA7D,EAAA,MAAmBsD,IAAKc,MAAA,SAAAZ,GAAyBA,EAAAa,OAAAC,YAAsCtE,EAAA4C,KAAAY,EAAAa,OAAAR,MAAAG,SAAoCO,KAAA,SAAAf,GAAyBxD,EAAAwE,mBAAqBpE,EAAA,SAAcE,OAAO2D,KAAA,SAAAJ,MAAA,eAAgC,MACv+BnD,iBCDA,SAAAC,EAAAC,GACAC,EAAA,QAQA,IAAAC,GAAA,EAEAC,EAAAJ,EAEAK,EAAA,KAEAC,EAAA,KAEAC,EAAAC,OAAAC,EAAA,KAAAD,CACAwB,EACA5C,EACAW,EACAI,EACAC,EACAC,EACAC,GAGAwD,EAAAvD,EAAA,yCCXAwD,EAAA,KAAAjD,IAAAkD,EAAAC,GAEA,IAAAC,QAEA,mCAGA,WACA,SACA,cAEA,iDAIAC,OACAC,mDAGA,0BACAC,sBACA,eAEA,gDACA,gBACAC,aAEAC,kDAGA,OACAA,2HAKAC,mBACAC,uCAEA7E,uEAGAyE,iDAIAK,4BAIA,+BACA,kBACAJ,sBAEA,OACAK,oEAGAL,oDAGAM,8DAGAC,uDAGA,yGAGA,0DAIA,SACA,qCAEAC,gBACA,+KAQA1C,SACA9C,SCvGAyF,EAAA,WAA0B,IAAA1F,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBK,YAAA,UAAoBL,EAAA,MAAAJ,EAAAQ,GAAA,WAAAJ,EAAA,QAAwCkD,IAAIC,OAAA,SAAAC,GAAkD,OAAxBA,EAAAC,iBAAwBzD,EAAAgD,KAAAQ,OAA0BpD,EAAA,SAAAJ,EAAAQ,GAAA,kBAAAJ,EAAA,SAAmDuD,aAAa1B,KAAA,QAAA2B,QAAA,eAAAC,MAAA7D,EAAA,IAAA8D,WAAA,MAAAC,WAAgFC,MAAA,KAAa1D,OAAS2D,KAAA,OAAAC,YAAA,2BAAsDC,UAAWN,MAAA7D,EAAA,KAAkBsD,IAAKc,MAAA,SAAAZ,GAAyBA,EAAAa,OAAAC,YAAsCtE,EAAAyF,IAAAjC,EAAAa,OAAAR,MAAAG,SAAmCO,KAAA,SAAAf,GAAyBxD,EAAAwE,mBAAqBpE,EAAA,SAAcE,OAAO2D,KAAA,SAAAJ,MAAA,WAA+B7D,EAAA8C,OAAAC,MAAAiC,MAAA,GAAA5E,EAAA,WAA8CuF,IAAA,UAAArF,OAAqBsF,WAAA5F,EAAA8C,OAAAC,MAAAiC,MAAAzE,IAAqC+C,IAAKuC,QAAA7F,EAAA8F,cAAAX,OAAAnF,EAAA+F,aAAAC,MAAAhG,EAAAiG,eAA+EjG,EAAAkG,MAAA,IACp3BC,KCKAC,GAAA,EAEAC,EAAA,KAEAC,EAAA,KAEAC,EAAA,KAEAC,EAAArF,OAAAC,EAAA,KAAAD,CACA0D,EACAa,EACAS,EACAC,EACAC,EACAC,EACAC,GAGAE,EAAAD,EAAA,QCEAE,QAEA,sDAGAnG,oCAEA0B,yEAIA0E,4BAIAhE,KAAA8B,EAEAI,MAAA4B,0DAEAG,QC7CAC,EAAA,WAA0B,IAAA7G,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBK,YAAA,SAAmBL,EAAA,QAAakD,IAAIC,OAAA,SAAAC,GAAkD,OAAxBA,EAAAC,iBAAwBzD,EAAA8G,QAAAtD,OAA6BxD,EAAAQ,GAAA,eAAAJ,EAAA,SAAoCuD,aAAa1B,KAAA,QAAA2B,QAAA,eAAAC,MAAA7D,EAAA,YAAA8D,WAAA,cAAAC,WAAgGC,MAAA,KAAa1D,OAAS2D,KAAA,OAAA8C,UAAA,MAA+B5C,UAAWN,MAAA7D,EAAA,aAA0BsD,IAAKc,MAAA,SAAAZ,GAAyBA,EAAAa,OAAAC,YAAsCtE,EAAA2G,YAAAnD,EAAAa,OAAAR,MAAAG,SAA2CO,KAAA,SAAAf,GAAyBxD,EAAAwE,mBAAqBpE,EAAA,SAAcE,OAAO2D,KAAA,SAAAJ,MAAA,YAAgC7D,EAAAQ,GAAA,oBAAAR,EAAAmD,GAAAnD,EAAA8C,OAAAC,MAAA6D,MAAA,WAAAxG,EAAA,MAAAJ,EAAAQ,GAAA,YAAAJ,EAAA,KAAAJ,EAAA6C,GAAA7C,EAAA8C,OAAAC,MAAA,eAAAiE,EAAAzG,GAA8J,OAAAH,EAAA,MAAgB8C,IAAA3C,EAAAD,OAAc2G,MAAA1G,KAAYP,EAAAQ,GAAA,WAAAR,EAAAmD,GAAA6D,EAAA/E,MAAA1B,GAAA,eAAwDH,EAAA,QAAcE,OAAOsG,KAAA5G,EAAA4G,QAAiBxG,EAAA,cACh8B8G,KCKAC,GAAA,EAEAC,EAAA,KAEAC,EAAA,KAEAC,EAAA,KAEAC,EAAApG,OAAAC,EAAA,KAAAD,CACAuF,EACAG,EACAK,EACAC,EACAC,EACAC,EACAC,GAGAjG,EAAA,KAAAkG,EAAA,2CCnBA,SAAAC,EAAAC,EAAAC,gBAEA,mEACA,uCAEAC,gBAEAC,EAEA,IAAAC,QAEA,mCAEA,6CACAC,OCnBA/H,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAJ,EAAAQ,GAAA,uBACzFE,iBCKAI,GAAA,EAEAC,EAAA,KAEAC,EAAA,KAEAC,EAAA,KAEAC,EAAAC,OAAAC,EAAA,KAAAD,CACA0G,EACA9H,EACAW,EACAI,EACAC,EACAC,EACAC,GAGAI,EAAA,KAAAH,EAAA,iHCpBM6G,EAAO,IAAIC,OAAOC,MACtBC,cACEC,QAAQ,GAEV5G,QACE6G,WACEC,OAGE,wEAORC,EAAA,KAAI7G,IAAI8G,EAAA,MAER,IAWIC,EAXEC,EAAY,GACZC,EAAeV,OAAOW,aAE5B,SAASC,EAAS5B,GAChB,OAAOA,EAGT,SAAS6B,IACP,OAAOH,EAAaI,QAAQ,QAK9BzH,EAAA,SAAmBkH,EAAA,KAAKQ,OACtBC,QAAQ,EACRjG,OACEW,IACEnD,GAAI,GACJ0B,KAAM4G,KAER7C,OAAO,EACPY,KAAM,GACNqC,SACAjE,OACEzE,GAAI,GACJ4E,QAAQ,EACR+D,UAAW,EACXjE,OAAQ,GAEVkE,SACAC,SAAU,IAAIC,KACdC,YAAY,GAEdlG,SACEnB,KAAM,SAACc,GAAD,OAAW,SAACiE,GAChB,IAAKA,EAAM,MAAO,aAClB,IAAMuC,EAAIxG,EAAMoG,MAAMnC,GACtB,OAAKuC,GAAMA,EAAEtH,KACNsH,EAAEtH,KADiB2G,EAAS5B,MAIvCwC,WACEC,cADS,SACK1G,EADL2G,GAC0B,IAAbrG,EAAaqG,EAAbrG,KAAMsG,EAAOD,EAAPC,KACtBA,EAAK3G,OACPD,EAAMkG,MAAMW,MACVvG,KAAMA,EACNT,KAAM+G,EAAK3G,OAETD,EAAMkG,MAAMtB,OAASc,GACvB1F,EAAMkG,MAAMY,SAGZF,EAAK1H,MACPqG,EAAA,KAAIwB,IAAI/G,EAAMoG,MAAO9F,GAAOpB,KAAM0H,EAAK1H,OAErC0H,EAAKI,MAAQJ,EAAKI,KAAOhH,EAAMqG,SACjCZ,EAASwB,OAAO3G,EAAM4G,KAAKC,WACzBnH,OACEiC,MAAOjC,EAAMiC,MACbiE,MAAOlG,EAAMkG,MACbE,MAAOpG,EAAMoG,UAIfQ,EAAK5G,OAASA,EAAMuG,aAAajG,IAC/BN,EAAMW,GAAGnD,IAAMwC,EAAMW,GAAGzB,OAE1B0H,EAAK5G,MAAMoG,MAAMpG,EAAMW,GAAGnD,KAAQ0B,KAAMc,EAAMW,GAAGzB,MACjDuG,EAAS2B,UAAUF,KAAKC,WAAWjI,KAAMc,EAAMW,GAAGzB,SAEpDc,EAAMuG,YAAa,EACnBvG,EAAMiC,MAAQ2E,EAAK5G,MAAMiC,MACzBjC,EAAMkG,MAAQU,EAAK5G,MAAMkG,MACzBlG,EAAMoG,MAAQQ,EAAK5G,MAAMoG,OAEvBQ,EAAK3E,QACPjC,EAAMiC,MAAQ2E,EAAK3E,QAGvBoF,QAtCS,SAsCDrH,EAAOC,GACTD,EAAMiD,MACRwC,EAAS2B,UAAUF,KAAKC,WAAWlH,UAEnCD,EAAMkG,MAAMW,MACVvG,KAAMN,EAAMW,GAAGnD,GACfqC,KAAMI,KAIZqH,MAhDS,SAgDHtH,GACJA,EAAM6D,KAAO,GACb7D,EAAMkG,SACNlG,EAAMoG,SACNpG,EAAMiC,OACJzE,GAAI,GACJ4E,QAAQ,EACR+D,UAAW,IAGfoB,MA1DS,SA0DHvH,EA1DGwH,GA0DgB,IAAXhK,EAAWgK,EAAXhK,GAAI0B,EAAOsI,EAAPtI,KACZ1B,GAAMwC,EAAMW,GAAGnD,KAAOA,IACpBwC,EAAMW,GAAGnD,IAAI+H,EAAA,KAAIkC,OAAOzH,EAAMoG,MAAOpG,EAAMW,GAAGnD,IAClD+H,EAAA,KAAIwB,IAAI/G,EAAMW,GAAI,KAAMnD,IAEtB0B,GACFyG,EAAa+B,QAAQ,OAAQxI,GAC7BqG,EAAA,KAAIwB,IAAI/G,EAAMW,GAAI,OAAQzB,GAC1BuG,EAAS2B,UAAUF,KAAKC,WAAWjI,WAC1Bc,EAAMW,GAAGzB,MAClBuG,EAAS2B,UAAUF,KAAKC,WAAWjI,KAAMc,EAAMW,GAAGzB,SAGtDyI,QAvES,SAuED3H,EAAO6D,GACb7D,EAAM6D,KAAOA,GAEf+D,SA1ES,SA0EA5H,EA1EA6H,GA0E8B,IAAtBrK,EAAsBqK,EAAtBrK,GAAI4E,EAAkByF,EAAlBzF,OAAQF,EAAU2F,EAAV3F,OACrBiE,GAAa,IAAIG,KACvBtG,EAAMiC,OAAUzE,KAAI4E,SAAQ+D,YAAWjE,UACvCuD,EAAS2B,UAAUF,KAAKC,WAAWlF,MAAOjC,EAAMiC,UAElD6F,QA/ES,SA+ED9H,EAAOiE,GACbsB,EAAA,KAAIwB,IAAI/G,EAAMoG,MAAOnC,OAGvB8D,WAnFS,SAmFE/H,EAAOiE,GAChBsB,EAAA,KAAIkC,OAAOzH,EAAMoG,MAAOnC,IAE1BhB,MAtFS,SAsFHjD,EAAOc,GACXd,EAAMiD,MAAQnC,GAEhBkH,SAzFS,SAyFAhI,EAAOiE,GACdjE,EAAMuG,WAAatC,IAGvBgE,SACEN,QADO,SAAAO,EAC4BrE,GAAM,IAAAsE,EAAAjL,KAAhCkL,EAAgCF,EAAhCE,OAAQpI,EAAwBkI,EAAxBlI,MAAOqI,EAAiBH,EAAjBG,SAClBxE,IAAS7D,EAAM6D,OACf7D,EAAMiD,OAAOmF,EAAO,SAAS,GAC7B3C,IACFA,EAAS6C,QACTF,EAAO,UAGTA,EAAO,UAAWvE,GAElBmB,EAAKzE,GAAG,QAAS,WACfgI,QAAQC,IAAI,QAASL,GACrB1C,EAAWgD,IAAKzD,EAAMhF,EAAM6D,MAE5BmB,EAAKxH,KAAKkL,KAAK,SAACC,GACdP,EAAO,SAAU5K,GAAImL,EAASnL,OAGhC,IAAIoL,EAAW,EACfnD,EAASlF,GAAG,cAAe,SAAC0D,GAC1BsE,QAAQC,IAAI,cAAevE,GAC3B2E,GAAY,EACZR,EAAO,UAAWnE,GAED,IAAb2E,GACFP,EAAS,eAAgBpE,KAI7BwB,EAASlF,GAAG,YAAa,SAAC0D,GACxBsE,QAAQC,IAAI,YAAavE,GACzBmE,EAAO,aAAcnE,KAGvBwB,EAASlF,GAAG,aAAc,SAAC/C,GACzB+K,QAAQC,IAAI,kBAAmBhL,GAC3BA,IAAOqG,GACT0E,QAAQM,MAAM,sCAEhBT,EAAO,SAAS,KAGlB3C,EAASlF,GAAG,UAAW,SAACuI,GACtB,IAAMlC,EAAOM,KAAK6B,MAAMD,EAAQlC,MAChC2B,QAAQC,IAAI,UAAWM,EAAQxI,KAAMsG,GACrCwB,EAAO,iBAAkB9H,KAAMwI,EAAQxI,KAAMsG,KAAMA,UAIzDoC,aAlDO,SAAAC,EAkDuBhF,GAAM,IAAtBmE,EAAsBa,EAAtBb,OAAQpI,EAAciJ,EAAdjJ,MACpB,QAAakJ,IAATjF,EAAoB,CAEtB,IAAMmC,EAAQX,EAAS0D,WACvB,GAAqB,IAAjB/C,EAAMxB,OAAc,OAExB,IAAM1E,KAASkJ,KAAKC,SAAWjD,EAAMxB,QACrCX,EAAOmC,EAAMlG,GAEfkI,EAAO,WAAYnE,GACnBwB,EAASwB,OAAOhD,EAAMiD,KAAKC,WAAWH,KAAMhH,EAAMqG","file":"js/app.b24a47df.js","sourcesContent":["<template>\n  <div id=\"app\">\n    <h1>readyup</h1>\n    <p>\n      Coordinate your work or play sessions with your friends.\n    </p>\n    <router-view class=\"view\"></router-view>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'app',\n}\n</script>\n\n<style lang=\"scss\">\nbody {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n  margin: 2em;\n}\n\nh1, h2 {\n  font-weight: normal;\n  margin: 1.5em 0 0.5em 0;\n}\n\nul {\n  list-style-type: none;\n  padding: 0;\n}\n\na {\n  color: #42b983;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('h1',[_vm._v(\"readyup\")]),_c('p',[_vm._v(\"\\n    Coordinate your work or play sessions with your friends.\\n  \")]),_c('router-view',{staticClass:\"view\"})],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1a01b8a8\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!sass-loader?{\\\"sourceMap\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/shazow/projects/readyup/node_modules/.cache/cache-loader\\\"}!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/shazow/projects/readyup/node_modules/.cache/cache-loader\\\"}!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1a01b8a8\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport VueRouter from 'vue-router'\n\nVue.config.productionTip = false\n\nVue.use(VueRouter)\n\nimport store from '@/store'\nimport App from '@/App.vue'\nimport Room from '@/views/Room.vue'\nimport Index from '@/views/Index.vue'\n\nconst router = new VueRouter({\n  mode: 'hash',\n  base: __dirname,\n  routes: [\n    { path: '/', name: 'index', component: Index },\n    { path: '/room/:id', name: 'room', component: Room },\n  ]\n})\n\nconst app = new Vue({\n  router,\n  store,\n  render: h => h(App),\n}).$mount('#app')\n\nexport default { app }\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","<template>\n  <div class=\"wall\">\n    <h2>Wall</h2>\n    <ul class=\"posts\">\n      <li v-for=\"(post, idx) in $store.state.posts\" :key='idx'>\n        <span class=\"displayname\">{{$store.getters.name(post.from)}}</span> {{post.text}}\n      </li>\n      <li>\n        <form v-on:submit.prevent=\"post\">\n          <span class=\"displayname\">{{$store.getters.name($store.state.me.id)}}</span>\n          <input type=\"text\" v-model.trim=\"text\" placeholder=\"...\" />\n          <input type=\"submit\" value=\"Post\" />\n        </form>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: 'Wall',\n  props: ['room'],\n  data: () => {\n    return {\n      text: '',\n    };\n  },\n  methods: {\n    post() {\n      this.$store.commit('addPost', this.text)\n      this.text = '';\n    }\n  },\n}\n</script>\n\n<style lang=\"scss\">\n.wall {\n    li {\n        margin-bottom: 0.5em;\n        line-height: 1.5em;\n    }\n    .displayname {\n        display: inline-block;\n        vertical-align: bottom;\n        width: 7em;\n        overflow: hidden;\n        font-weight: bold;\n        text-align: right;\n        &:after {\n            content: \": \";\n        }\n    }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Wall.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wall\"},[_c('h2',[_vm._v(\"Wall\")]),_c('ul',{staticClass:\"posts\"},[_vm._l((_vm.$store.state.posts),function(post,idx){return _c('li',{key:idx},[_c('span',{staticClass:\"displayname\"},[_vm._v(_vm._s(_vm.$store.getters.name(post.from)))]),_vm._v(\" \"+_vm._s(post.text)+\"\\n    \")])}),_c('li',[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.post($event)}}},[_c('span',{staticClass:\"displayname\"},[_vm._v(_vm._s(_vm.$store.getters.name(_vm.$store.state.me.id)))]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.text),expression:\"text\",modifiers:{\"trim\":true}}],attrs:{\"type\":\"text\",\"placeholder\":\"...\"},domProps:{\"value\":(_vm.text)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.text=$event.target.value.trim()},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('input',{attrs:{\"type\":\"submit\",\"value\":\"Post\"}})])])],2)])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e62be4ce\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Wall.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":false,\\\"minimize\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!sass-loader?{\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Wall.vue\")\n}\n/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/shazow/projects/readyup/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Wall.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/shazow/projects/readyup/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Wall.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e62be4ce\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Wall.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Wall.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"video\">\n    <h2>Video</h2>\n    <form v-on:submit.prevent=\"post\">\n      <label>Youtube Link</label>\n      <input type=\"text\" v-model.trim=\"url\" placeholder=\"https://youtube.com/...\" />\n      <input type=\"submit\" value=\"Set\" />\n    </form>\n    <youtube :video-id=\"$store.state.video.id\" ref=\"youtube\" @playing=\"handlePlaying\" @paused=\"handlePaused\" @ready=\"handleReady\" v-if=\"$store.state.video.id\"></youtube>\n  </div>\n</template>\n\n<script>\n\nimport Vue from 'vue'\nimport VueYouTubeEmbed from 'vue-youtube-embed'\nVue.use(VueYouTubeEmbed)\n\nexport default {\n  name: 'Video',\n  data: () => {\n    return {\n      url: '',\n      paused: true,\n      player: null,\n      pulling: false,\n    }\n  },\n  methods: {\n    handleReady(player) {\n      this.player = player\n      this.pullState()\n    },\n    handlePlaying() {\n      this.paused = false\n      const video = this.$store.state.video\n      if (this.pulling) {\n        // Seek again just in case buffering took a while\n        this.pulling = false\n        const offset = video.timestamp ? ((+new Date()) - video.timestamp) / 1000 : 0\n        this.seek(offset + video.offset)\n      }\n      this.pushState()\n    },\n    handlePaused() {\n      this.paused = true\n      this.pushState()\n    },\n    pushState() {\n      if (this.$store.state.video.paused === this.paused) return;\n      this.$store.commit('setVideo', {\n        paused: this.paused,\n        offset: this.getOffset(),\n        id: this.$store.state.video.id,\n      })\n    },\n    pullState(state) {\n      const video = state !== undefined ? state.video : this.$store.state.video\n      if (video.paused === this.paused) return\n\n      if (video.paused) {\n        this.pause()\n        return\n      }\n\n      if (video.timestamp) {\n        const offset = ((+new Date()) - video.timestamp) / 1000\n        this.seek(offset + video.offset)\n      }\n      this.pulling = true\n      this.play()\n    },\n    seek(offset) {\n      return offset && this.player && this.player.seekTo(offset)\n    },\n    play() {\n      return this.player && this.player.playVideo()\n    },\n    pause() {\n      return this.player && this.player.pauseVideo()\n    },\n    isPlaying() {\n      return this.player && this.player.getPlayerState() === 1\n    },\n    getOffset() {\n      return this.player && this.player.getCurrentTime() || 0\n    },\n    post() {\n      this.$store.commit('setVideo', {\n        paused: true,\n        offset: 0,\n        id: this.$youtube.getIdFromURL(this.url),\n      })\n      this.url = ''\n    }\n  },\n  mounted() {\n    this.$store.subscribe(function(mutation, state) {\n      if (mutation.type !== 'handleReceive') return\n      if (mutation.payload.data.video === undefined) return\n      if (mutation.payload.data.video.paused === this.paused) return\n      this.pullState(state)\n    }.bind(this))\n  },\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Video.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"video\"},[_c('h2',[_vm._v(\"Video\")]),_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.post($event)}}},[_c('label',[_vm._v(\"Youtube Link\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.url),expression:\"url\",modifiers:{\"trim\":true}}],attrs:{\"type\":\"text\",\"placeholder\":\"https://youtube.com/...\"},domProps:{\"value\":(_vm.url)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.url=$event.target.value.trim()},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('input',{attrs:{\"type\":\"submit\",\"value\":\"Set\"}})]),(_vm.$store.state.video.id)?_c('youtube',{ref:\"youtube\",attrs:{\"video-id\":_vm.$store.state.video.id},on:{\"playing\":_vm.handlePlaying,\"paused\":_vm.handlePaused,\"ready\":_vm.handleReady}}):_vm._e()],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-29c64971\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Video.vue\n// module id = null\n// module chunks = ","/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/shazow/projects/readyup/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Video.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/shazow/projects/readyup/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Video.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-29c64971\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Video.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Video.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"room\">\n    <form v-on:submit.prevent=\"setName\">\n      I am <input type=\"text\" v-model.trim=\"displayname\" maxlength=\"10\" />\n      <input type=\"submit\" value=\"Save\" />\n    </form>\n\n    Welcome to {{ $store.state.room }}.\n\n    <h2>Online</h2>\n    <ul>\n      <li v-for=\"(peer, id) in $store.state.peers\" :key=\"id\" :title=\"id\">\n        {{peer.name || id}}\n      </li>\n    </ul>\n\n    <wall :room=\"room\"></wall>\n\n    <Video></Video>\n  </div>\n</template>\n\n<script>\nimport Wall from '@/components/Wall.vue'\nimport Video from '@/components/Video.vue'\n\nexport default {\n  name: 'Room',\n  data() {\n    return {\n      room: this.$route.params.id,\n      displayname: this.$store.state.me.name,\n    }\n  },\n  methods: {\n    setName() {\n      this.$store.commit('setMe', {name: this.displayname})\n    },\n  },\n  components: {\n    Wall,\n    Video,\n  },\n  created() {\n    this.$store.dispatch('setRoom', this.room)\n  },\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/Room.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"room\"},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.setName($event)}}},[_vm._v(\"\\n    I am \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.displayname),expression:\"displayname\",modifiers:{\"trim\":true}}],attrs:{\"type\":\"text\",\"maxlength\":\"10\"},domProps:{\"value\":(_vm.displayname)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.displayname=$event.target.value.trim()},\"blur\":function($event){_vm.$forceUpdate()}}}),_c('input',{attrs:{\"type\":\"submit\",\"value\":\"Save\"}})]),_vm._v(\"\\n\\n  Welcome to \"+_vm._s(_vm.$store.state.room)+\".\\n\\n  \"),_c('h2',[_vm._v(\"Online\")]),_c('ul',_vm._l((_vm.$store.state.peers),function(peer,id){return _c('li',{key:id,attrs:{\"title\":id}},[_vm._v(\"\\n      \"+_vm._s(peer.name || id)+\"\\n    \")])})),_c('wall',{attrs:{\"room\":_vm.room}}),_c('Video')],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4e227a9b\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Room.vue\n// module id = null\n// module chunks = ","/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/shazow/projects/readyup/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Room.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/shazow/projects/readyup/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Room.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4e227a9b\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Room.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Room.vue\n// module id = null\n// module chunks = ","<template>\n  <div>Creating room...</div>\n</template>\n\n<script>\nfunction random_string(num, alphabet) {\n    const charset = alphabet || 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    let r = '';\n    for (let i=num; i > 0; i--) {\n        r += charset[~~(Math.random() * charset.length)];\n    }\n    return r;\n}\n\nexport default {\n  name: 'Index',\n  mounted() {\n    const roomId = random_string(8)\n    this.$router.push({ name: 'room', params: { id: roomId }})\n  },\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/Index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\"Creating room...\")])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b5ebc260\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Index.vue\n// module id = null\n// module chunks = ","/* script */\nexport * from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/shazow/projects/readyup/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Index.vue\"\nimport __vue_script__ from \"!!cache-loader?{\\\"cacheDirectory\\\":\\\"/home/shazow/projects/readyup/node_modules/.cache/cache-loader\\\"}!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Index.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b5ebc260\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Index.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Vuex from 'vuex'\n\nimport Room from 'ipfs-pubsub-room'\nconst ipfs = new window.Ipfs({\n  EXPERIMENTAL: {\n    pubsub: true\n  },\n  config: {\n    Addresses: {\n      Swarm: [\n        // TODO: Try webrtc? https://github.com/ipfs/js-ipfs/issues/1088\n        //'/dns4/wrtc-star.discovery.libp2p.io/tcp/443/wss/p2p-webrtc-star'\n        '/dns4/ws-star.discovery.libp2p.io/tcp/443/wss/p2p-websocket-star'\n      ]\n    }\n  }\n})\n\n\nVue.use(Vuex)\n\nconst maxLength = 10\nconst browserStore = window.localStorage\n\nfunction anonName(peer) {\n  return peer\n}\n\nfunction defaultName() {\n  return browserStore.getItem('name')\n}\n\nlet ipfsRoom;\n\nexport default new Vuex.Store({\n  strict: true,\n  state: {\n    me: {\n      id: '',\n      name: defaultName(),\n    },\n    ready: false,\n    room: '',\n    posts: [],\n    video: {\n      id: '',\n      paused: false,\n      timestamp: 0,\n      offset: 0,\n    },\n    peers: {},\n    started: +new Date(),\n    askedState: false,\n  },\n  getters: {\n    name: (state) => (peer) => {\n      if (!peer) return 'Anonymoose'\n      const p = state.peers[peer]\n      if (!p || !p.name) return anonName(peer)\n      return p.name\n    }\n  },\n  mutations: {\n    handleReceive(state, {from, data}) {\n      if (data.post) {\n        state.posts.push({\n          from: from,\n          text: data.post\n        })\n        if (state.posts.length > maxLength) {\n          state.posts.shift();\n        }\n      }\n      if (data.name) {\n        Vue.set(state.peers, from, {name: data.name})\n      }\n      if (data.sync && data.sync > state.started) {\n        ipfsRoom.sendTo(from, JSON.stringify({\n          state: {\n            video: state.video,\n            posts: state.posts,\n            peers: state.peers,\n          },\n        }))\n      }\n      if (data.state && state.askedState===from) {\n        if (state.me.id && state.me.name) {\n          // Override me\n          data.state.peers[state.me.id] = { name: state.me.name }\n          ipfsRoom.broadcast(JSON.stringify({name: state.me.name}))\n        }\n        state.askedState = false\n        state.video = data.state.video\n        state.posts = data.state.posts\n        state.peers = data.state.peers\n      }\n      if (data.video) {\n        state.video = data.video\n      }\n    },\n    addPost(state, post) {\n      if (state.ready) {\n        ipfsRoom.broadcast(JSON.stringify({post}))\n      } else {\n        state.posts.push({\n          from: state.me.id,\n          text: post,\n        })\n      }\n    },\n    reset(state) {\n      state.room = ''\n      state.posts = []\n      state.peers = {}\n      state.video = {\n        id: '',\n        paused: false,\n        timestamp: 0,\n      }\n    },\n    setMe(state, {id, name}) {\n      if (id && state.me.id !== id) {\n        if (state.me.id) Vue.delete(state.peers, state.me.id)\n        Vue.set(state.me, 'id', id)\n      }\n      if (name) {\n        browserStore.setItem('name', name)\n        Vue.set(state.me, 'name', name)\n        ipfsRoom.broadcast(JSON.stringify({name}))\n      } else if (state.me.name) {\n        ipfsRoom.broadcast(JSON.stringify({name: state.me.name}))\n      }\n    },\n    setRoom(state, room) {\n      state.room = room;\n    },\n    setVideo(state, {id, paused, offset }) {\n      const timestamp = +new Date()\n      state.video = { id, paused, timestamp, offset }\n      ipfsRoom.broadcast(JSON.stringify({video: state.video}))\n    },\n    addPeer(state, peer) {\n      Vue.set(state.peers, peer, {\n      })\n    },\n    removePeer(state, peer) {\n      Vue.delete(state.peers, peer)\n    },\n    ready(state, value) {\n      state.ready = value\n    },\n    waitSync(state, peer) {\n      state.askedState = peer\n    }\n  },\n  actions: {\n    setRoom({commit, state, dispatch}, room) {\n      if (room === state.room) return\n      if (state.ready) commit('ready', false)\n      if (ipfsRoom) {\n        ipfsRoom.leave()\n        commit('reset')\n      }\n\n      commit('setRoom', room)\n\n      ipfs.on('ready', () => {\n        console.log('ready', this)\n        ipfsRoom = Room(ipfs, state.room)\n\n        ipfs.id().then((peerInfo) => {\n          commit('setMe', {id: peerInfo.id})\n        })\n\n        let numPeers = 0\n        ipfsRoom.on('peer joined', (peer) => {\n          console.log('peer joined', peer)\n          numPeers += 1\n          commit('addPeer', peer)\n\n          if (numPeers === 1) {\n            dispatch('requestState', peer)\n          }\n        })\n\n        ipfsRoom.on('peer left', (peer) => {\n          console.log('peer left', peer)\n          commit('removePeer', peer)\n        })\n\n        ipfsRoom.on('subscribed', (id) => {\n          console.log('peer subscribed', id)\n          if (id !== room) {\n            console.error('wrong room, this should not happen')\n          }\n          commit('ready', true)\n        })\n\n        ipfsRoom.on('message', (message) => {\n          const data = JSON.parse(message.data)\n          console.log('message', message.from, data)\n          commit('handleReceive', {from: message.from, data: data})\n        })\n      })\n    },\n    requestState({commit, state}, peer) {\n      if (peer === undefined) {\n        // We choose a random peer to get state from\n        const peers = ipfsRoom.getPeers()\n        if (peers.length === 0) return // We're the host?\n\n        const idx = ~~(Math.random() * peers.length)\n        peer = peers[idx]\n      }\n      commit('waitSync', peer)\n      ipfsRoom.sendTo(peer, JSON.stringify({sync: state.started}))\n    },\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/store.js"],"sourceRoot":""}